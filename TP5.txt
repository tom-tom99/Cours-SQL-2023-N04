J'ai ajoutÃ© des bons et des compos : 


INSERT INTO BON (ID, NUMERO, DELAI, ID_FOU, DATE_CMDE) VALUES (3, 1, 3, 1, '2019-04-08 09:30:00');
INSERT INTO COMPO (ID_ART, ID_BON, QTE) values (1, 3, 8);
INSERT INTO COMPO (ID_ART, ID_BON, QTE) values (5, 3, 4);
INSERT INTO COMPO (ID_ART, ID_BON, QTE) values (7, 3, 1);


a) SELECT * FROM article ORDER BY article.DESIGNATION;

b) SELECT * FROM article ORDER BY article.PRIX DESC;

c) SELECT * FROM article WHERE article.DESIGNATION LIKE '%boulon%'ORDER BY article.PRIX;

d) SELECT * FROM article WHERE article.DESIGNATION LIKE '%sachet%';

e) SELECT * FROM article WHERE lower(article.DESIGNATION) LIKE '%sachet%';

f) SELECT * FROM article JOIN fournisseur ON article.ID_FOU = fournisseur.ID ORDER BY fournisseur.NOM, article.PRIX DESC;

g) SELECT * FROM article JOIN fournisseur ON article.ID_FOU = fournisseur.ID WHERE fournisseur.NOM = 'Dubois & Fils';

h) SELECT AVG(article.PRIX) FROM article JOIN fournisseur ON article.ID_FOU = fournisseur.ID WHERE fournisseur.NOM = 'Dubois & Fils';

i) SELECT fournisseur.NOM, AVG(article.PRIX) AS moyenne_prix FROM article JOIN fournisseur ON article.ID_FOU = fournisseur.ID GROUP BY fournisseur.NOM;

j) SELECT * FROM bon WHERE bon.DATE_CMDE BETWEEN '2019-0-01' AND '2019-04-05 12:00:00';

k) SELECT DISTINCT BON.ID, Bon.NUMERO, bon.DATE_CMDE, bon.DELAI, bon.ID_FOU FROM bon 
JOIN compo ON bon.ID = compo.ID_BON 
JOIN article ON compo.ID_ART = article.ID 
WHERE article.DESIGNATION LIKE '%boulon%';

l) SELECT DISTINCT BON.ID, Bon.NUMERO, bon.DATE_CMDE, bon.DELAI, bon.ID_FOU, fournisseur.NOM FROM bon 
JOIN compo ON bon.ID = compo.ID_BON 
JOIN article ON compo.ID_ART = article.ID 
JOIN fournisseur ON article.ID_FOU = fournisseur.ID
WHERE article.DESIGNATION LIKE '%boulon%';

m) SELECT DISTINCT bon.ID , SUM(article.PRIX * compo.QTE) AS prix_total_bon  FROM bon 
JOIN compo ON bon.ID = compo.ID_BON 
JOIN article ON compo.ID_ART = article.ID 
GROUP BY bon.ID;

n) SELECT bon.ID, SUM(compo.QTE) AS nombre_article_du_bon  FROM bon 
JOIN compo ON bon.ID = compo.ID_BON 
GROUP BY bon.ID;

o) SELECT bon.ID, SUM(compo.QTE) AS nombre_article_du_bon
FROM bon
JOIN compo ON bon.ID = compo.ID_BON
GROUP BY bon.ID
HAVING SUM(compo.QTE) > 25;

p) SELECT DISTINCT bon.ID , SUM(article.PRIX * compo.QTE) AS prix_total_bon  FROM bon 
JOIN compo ON bon.ID = compo.ID_BON 
JOIN article ON compo.ID_ART = article.ID
WHERE bon.DATE_CMDE BETWEEN '2019-04-01' AND '2019-04-31';


option


a) SELECT * FROM article JOIN article AS article2 ON article.DESIGNATION= article2.DESIGNATION 
WHERE NOT(article.ID_FOU = article2.ID_FOU);

b) SELECT YEAR(bon.DATE_CMDE),MONTH(bon.DATE_CMDE),SUM(article.PRIX * compo.QTE) AS somme_depense_mois_par_mois
FROM bon 
JOIN compo ON bon.ID = compo.ID_BON
JOIN article ON compo.ID_ART = article.ID
JOIN fournisseur ON article.ID_FOU = fournisseur.ID
GROUP BY MONTH(bon.DATE_CMDE), YEAR(bon.DATE_CMDE);

c) SELECT *
FROM bon
WHERE NOT EXISTS (SELECT 1 FROM compo WHERE compo.ID_BON = bon.ID);

d) SELECT fournisseur.NOM, 
       SUM(article.PRIX * compo.QTE) / VIRTUA.nb_commande AS moyenne_prix_par_commande
FROM (
    SELECT fournisseur.ID, COUNT(DISTINCT bon.ID) AS nb_commande 
    FROM bon
    LEFT JOIN compo ON bon.ID = compo.ID_BON
    LEFT JOIN article ON compo.ID_ART = article.ID
    LEFT JOIN fournisseur ON article.ID_FOU = fournisseur.ID
    GROUP BY bon.ID_FOU
) VIRTUA
JOIN bon ON bon.ID_FOU = VIRTUA.ID
JOIN compo ON bon.ID = compo.ID_BON
JOIN article ON compo.ID_ART = article.ID
JOIN fournisseur ON article.ID_FOU = fournisseur.ID
GROUP BY fournisseur.ID, VIRTUA.nb_commande;






SELECT DISTINCT bon.ID , SUM(article.PRIX * compo.QTE) AS prix_total_bon FROM bon JOIN compo ON bon.ID = compo.ID_BON JOIN article ON compo.ID_ART = article.ID JOIN fournisseur ON article.ID_FOU = fournisseur.ID GROUP BY fournisseur.NOM;